{"ast":null,"code":"import { __awaiter, __generator, __spreadArrays } from \"tslib\";\nimport { r as registerInstance, c as createEvent, e as getElement, h, H as Host } from './index-29df6f59.js';\nimport { b as getIonMode } from './ionic-global-08f4fb8a.js';\nimport { e as debounce } from './helpers-5c745fbd.js';\nimport { o as openURL, c as createColorClasses } from './theme-3f0b0c04.js';\n\nvar Route =\n/** @class */\nfunction () {\n  function Route(hostRef) {\n    registerInstance(this, hostRef);\n    /**\n     * Relative path that needs to match in order for this route to apply.\n     *\n     * Accepts paths similar to expressjs so that you can define parameters\n     * in the url /foo/:bar where bar would be available in incoming props.\n     */\n\n    this.url = '';\n    this.ionRouteDataChanged = createEvent(this, \"ionRouteDataChanged\", 7);\n  }\n\n  Route.prototype.onUpdate = function (newValue) {\n    this.ionRouteDataChanged.emit(newValue);\n  };\n\n  Route.prototype.onComponentProps = function (newValue, oldValue) {\n    if (newValue === oldValue) {\n      return;\n    }\n\n    var keys1 = newValue ? Object.keys(newValue) : [];\n    var keys2 = oldValue ? Object.keys(oldValue) : [];\n\n    if (keys1.length !== keys2.length) {\n      this.onUpdate(newValue);\n      return;\n    }\n\n    for (var _i = 0, keys1_1 = keys1; _i < keys1_1.length; _i++) {\n      var key = keys1_1[_i];\n\n      if (newValue[key] !== oldValue[key]) {\n        this.onUpdate(newValue);\n        return;\n      }\n    }\n  };\n\n  Route.prototype.connectedCallback = function () {\n    this.ionRouteDataChanged.emit();\n  };\n\n  Object.defineProperty(Route, \"watchers\", {\n    get: function get() {\n      return {\n        \"url\": [\"onUpdate\"],\n        \"component\": [\"onUpdate\"],\n        \"componentProps\": [\"onComponentProps\"]\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return Route;\n}();\n\nvar RouteRedirect =\n/** @class */\nfunction () {\n  function RouteRedirect(hostRef) {\n    registerInstance(this, hostRef);\n    this.ionRouteRedirectChanged = createEvent(this, \"ionRouteRedirectChanged\", 7);\n  }\n\n  RouteRedirect.prototype.propDidChange = function () {\n    this.ionRouteRedirectChanged.emit();\n  };\n\n  RouteRedirect.prototype.connectedCallback = function () {\n    this.ionRouteRedirectChanged.emit();\n  };\n\n  Object.defineProperty(RouteRedirect, \"watchers\", {\n    get: function get() {\n      return {\n        \"from\": [\"propDidChange\"],\n        \"to\": [\"propDidChange\"]\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return RouteRedirect;\n}();\n\nvar ROUTER_INTENT_NONE = 'root';\nvar ROUTER_INTENT_FORWARD = 'forward';\nvar ROUTER_INTENT_BACK = 'back';\n\nvar generatePath = function generatePath(segments) {\n  var path = segments.filter(function (s) {\n    return s.length > 0;\n  }).join('/');\n  return '/' + path;\n};\n\nvar chainToPath = function chainToPath(chain) {\n  var path = [];\n\n  for (var _i = 0, chain_1 = chain; _i < chain_1.length; _i++) {\n    var route = chain_1[_i];\n\n    for (var _a = 0, _b = route.path; _a < _b.length; _a++) {\n      var segment = _b[_a];\n\n      if (segment[0] === ':') {\n        var param = route.params && route.params[segment.slice(1)];\n\n        if (!param) {\n          return null;\n        }\n\n        path.push(param);\n      } else if (segment !== '') {\n        path.push(segment);\n      }\n    }\n  }\n\n  return path;\n};\n\nvar writePath = function writePath(history, root, useHash, path, direction, state, queryString) {\n  var url = generatePath(__spreadArrays(parsePath(root), path));\n\n  if (useHash) {\n    url = '#' + url;\n  }\n\n  if (queryString !== undefined) {\n    url = url + '?' + queryString;\n  }\n\n  if (direction === ROUTER_INTENT_FORWARD) {\n    history.pushState(state, '', url);\n  } else {\n    history.replaceState(state, '', url);\n  }\n};\n\nvar removePrefix = function removePrefix(prefix, path) {\n  if (prefix.length > path.length) {\n    return null;\n  }\n\n  if (prefix.length <= 1 && prefix[0] === '') {\n    return path;\n  }\n\n  for (var i = 0; i < prefix.length; i++) {\n    if (prefix[i].length > 0 && prefix[i] !== path[i]) {\n      return null;\n    }\n  }\n\n  if (path.length === prefix.length) {\n    return [''];\n  }\n\n  return path.slice(prefix.length);\n};\n\nvar readPath = function readPath(loc, root, useHash) {\n  var pathname = loc.pathname;\n\n  if (useHash) {\n    var hash = loc.hash;\n    pathname = hash[0] === '#' ? hash.slice(1) : '';\n  }\n\n  var prefix = parsePath(root);\n  var path = parsePath(pathname);\n  return removePrefix(prefix, path);\n};\n\nvar parsePath = function parsePath(path) {\n  if (path == null) {\n    return [''];\n  }\n\n  var removeQueryString = path.split('?')[0];\n  var segments = removeQueryString.split('/').map(function (s) {\n    return s.trim();\n  }).filter(function (s) {\n    return s.length > 0;\n  });\n\n  if (segments.length === 0) {\n    return [''];\n  } else {\n    return segments;\n  }\n};\n\nvar printRoutes = function printRoutes(routes) {\n  console.group(\"[ion-core] ROUTES[\" + routes.length + \"]\");\n\n  var _loop_1 = function _loop_1(chain) {\n    var path = [];\n    chain.forEach(function (r) {\n      return path.push.apply(path, r.path);\n    });\n    var ids = chain.map(function (r) {\n      return r.id;\n    });\n    console.debug(\"%c \" + generatePath(path), 'font-weight: bold; padding-left: 20px', '=>\\t', \"(\" + ids.join(', ') + \")\");\n  };\n\n  for (var _i = 0, routes_1 = routes; _i < routes_1.length; _i++) {\n    var chain = routes_1[_i];\n\n    _loop_1(chain);\n  }\n\n  console.groupEnd();\n};\n\nvar printRedirects = function printRedirects(redirects) {\n  console.group(\"[ion-core] REDIRECTS[\" + redirects.length + \"]\");\n\n  for (var _i = 0, redirects_1 = redirects; _i < redirects_1.length; _i++) {\n    var redirect = redirects_1[_i];\n\n    if (redirect.to) {\n      console.debug('FROM: ', \"$c \" + generatePath(redirect.from), 'font-weight: bold', ' TO: ', \"$c \" + generatePath(redirect.to), 'font-weight: bold');\n    }\n  }\n\n  console.groupEnd();\n};\n\nvar writeNavState = function writeNavState(root, chain, direction, index, changed, animation) {\n  if (changed === void 0) {\n    changed = false;\n  }\n\n  return __awaiter(void 0, void 0, void 0, function () {\n    var outlet, route, result, e_1;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          _a.trys.push([0, 6,, 7]);\n\n          outlet = searchNavNode(root); // make sure we can continue interacting the DOM, otherwise abort\n\n          if (index >= chain.length || !outlet) {\n            return [2\n            /*return*/\n            , changed];\n          }\n\n          return [4\n          /*yield*/\n          , outlet.componentOnReady()];\n\n        case 1:\n          _a.sent();\n\n          route = chain[index];\n          return [4\n          /*yield*/\n          , outlet.setRouteId(route.id, route.params, direction, animation)];\n\n        case 2:\n          result = _a.sent(); // if the outlet changed the page, reset navigation to neutral (no direction)\n          // this means nested outlets will not animate\n\n          if (result.changed) {\n            direction = ROUTER_INTENT_NONE;\n            changed = true;\n          }\n\n          return [4\n          /*yield*/\n          , writeNavState(result.element, chain, direction, index + 1, changed, animation)];\n\n        case 3:\n          // recursively set nested outlets\n          changed = _a.sent();\n          if (!result.markVisible) return [3\n          /*break*/\n          , 5];\n          return [4\n          /*yield*/\n          , result.markVisible()];\n\n        case 4:\n          _a.sent();\n\n          _a.label = 5;\n\n        case 5:\n          return [2\n          /*return*/\n          , changed];\n\n        case 6:\n          e_1 = _a.sent();\n          console.error(e_1);\n          return [2\n          /*return*/\n          , false];\n\n        case 7:\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  });\n};\n\nvar readNavState = function readNavState(root) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var ids, outlet, node, id;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          ids = [];\n          node = root;\n          _a.label = 1;\n\n        case 1:\n          if (!true) return [3\n          /*break*/\n          , 5];\n          outlet = searchNavNode(node);\n          if (!outlet) return [3\n          /*break*/\n          , 3];\n          return [4\n          /*yield*/\n          , outlet.getRouteId()];\n\n        case 2:\n          id = _a.sent();\n\n          if (id) {\n            node = id.element;\n            id.element = undefined;\n            ids.push(id);\n          } else {\n            return [3\n            /*break*/\n            , 5];\n          }\n\n          return [3\n          /*break*/\n          , 4];\n\n        case 3:\n          return [3\n          /*break*/\n          , 5];\n\n        case 4:\n          return [3\n          /*break*/\n          , 1];\n\n        case 5:\n          return [2\n          /*return*/\n          , {\n            ids: ids,\n            outlet: outlet\n          }];\n      }\n    });\n  });\n};\n\nvar waitUntilNavNode = function waitUntilNavNode() {\n  if (searchNavNode(document.body)) {\n    return Promise.resolve();\n  }\n\n  return new Promise(function (resolve) {\n    window.addEventListener('ionNavWillLoad', resolve, {\n      once: true\n    });\n  });\n};\n\nvar QUERY = ':not([no-router]) ion-nav, :not([no-router]) ion-tabs, :not([no-router]) ion-router-outlet';\n\nvar searchNavNode = function searchNavNode(root) {\n  if (!root) {\n    return undefined;\n  }\n\n  if (root.matches(QUERY)) {\n    return root;\n  }\n\n  var outlet = root.querySelector(QUERY);\n  return outlet ? outlet : undefined;\n};\n\nvar matchesRedirect = function matchesRedirect(input, route) {\n  var from = route.from,\n      to = route.to;\n\n  if (to === undefined) {\n    return false;\n  }\n\n  if (from.length > input.length) {\n    return false;\n  }\n\n  for (var i = 0; i < from.length; i++) {\n    var expected = from[i];\n\n    if (expected === '*') {\n      return true;\n    }\n\n    if (expected !== input[i]) {\n      return false;\n    }\n  }\n\n  return from.length === input.length;\n};\n\nvar routeRedirect = function routeRedirect(path, routes) {\n  return routes.find(function (route) {\n    return matchesRedirect(path, route);\n  });\n};\n\nvar matchesIDs = function matchesIDs(ids, chain) {\n  var len = Math.min(ids.length, chain.length);\n  var i = 0;\n\n  for (; i < len; i++) {\n    if (ids[i].toLowerCase() !== chain[i].id) {\n      break;\n    }\n  }\n\n  return i;\n};\n\nvar matchesPath = function matchesPath(inputPath, chain) {\n  var segments = new RouterSegments(inputPath);\n  var matchesDefault = false;\n  var allparams;\n\n  for (var i = 0; i < chain.length; i++) {\n    var path = chain[i].path;\n\n    if (path[0] === '') {\n      matchesDefault = true;\n    } else {\n      for (var _i = 0, path_1 = path; _i < path_1.length; _i++) {\n        var segment = path_1[_i];\n        var data = segments.next(); // data param\n\n        if (segment[0] === ':') {\n          if (data === '') {\n            return null;\n          }\n\n          allparams = allparams || [];\n          var params = allparams[i] || (allparams[i] = {});\n          params[segment.slice(1)] = data;\n        } else if (data !== segment) {\n          return null;\n        }\n      }\n\n      matchesDefault = false;\n    }\n  }\n\n  var matches = matchesDefault ? matchesDefault === (segments.next() === '') : true;\n\n  if (!matches) {\n    return null;\n  }\n\n  if (allparams) {\n    return chain.map(function (route, i) {\n      return {\n        id: route.id,\n        path: route.path,\n        params: mergeParams(route.params, allparams[i])\n      };\n    });\n  }\n\n  return chain;\n};\n\nvar mergeParams = function mergeParams(a, b) {\n  if (!a && b) {\n    return b;\n  } else if (a && !b) {\n    return a;\n  } else if (a && b) {\n    return Object.assign(Object.assign({}, a), b);\n  }\n\n  return undefined;\n};\n\nvar routerIDsToChain = function routerIDsToChain(ids, chains) {\n  var match = null;\n  var maxMatches = 0;\n  var plainIDs = ids.map(function (i) {\n    return i.id;\n  });\n\n  for (var _i = 0, chains_1 = chains; _i < chains_1.length; _i++) {\n    var chain = chains_1[_i];\n    var score = matchesIDs(plainIDs, chain);\n\n    if (score > maxMatches) {\n      match = chain;\n      maxMatches = score;\n    }\n  }\n\n  if (match) {\n    return match.map(function (route, i) {\n      return {\n        id: route.id,\n        path: route.path,\n        params: mergeParams(route.params, ids[i] && ids[i].params)\n      };\n    });\n  }\n\n  return null;\n};\n\nvar routerPathToChain = function routerPathToChain(path, chains) {\n  var match = null;\n  var matches = 0;\n\n  for (var _i = 0, chains_2 = chains; _i < chains_2.length; _i++) {\n    var chain = chains_2[_i];\n    var matchedChain = matchesPath(path, chain);\n\n    if (matchedChain !== null) {\n      var score = computePriority(matchedChain);\n\n      if (score > matches) {\n        matches = score;\n        match = matchedChain;\n      }\n    }\n  }\n\n  return match;\n};\n\nvar computePriority = function computePriority(chain) {\n  var score = 1;\n  var level = 1;\n\n  for (var _i = 0, chain_2 = chain; _i < chain_2.length; _i++) {\n    var route = chain_2[_i];\n\n    for (var _a = 0, _b = route.path; _a < _b.length; _a++) {\n      var path = _b[_a];\n\n      if (path[0] === ':') {\n        score += Math.pow(1, level);\n      } else if (path !== '') {\n        score += Math.pow(2, level);\n      }\n\n      level++;\n    }\n  }\n\n  return score;\n};\n\nvar RouterSegments =\n/** @class */\nfunction () {\n  function RouterSegments(path) {\n    this.path = path.slice();\n  }\n\n  RouterSegments.prototype.next = function () {\n    if (this.path.length > 0) {\n      return this.path.shift();\n    }\n\n    return '';\n  };\n\n  return RouterSegments;\n}();\n\nvar readRedirects = function readRedirects(root) {\n  return Array.from(root.children).filter(function (el) {\n    return el.tagName === 'ION-ROUTE-REDIRECT';\n  }).map(function (el) {\n    var to = readProp(el, 'to');\n    return {\n      from: parsePath(readProp(el, 'from')),\n      to: to == null ? undefined : parsePath(to)\n    };\n  });\n};\n\nvar readRoutes = function readRoutes(root) {\n  return flattenRouterTree(readRouteNodes(root));\n};\n\nvar readRouteNodes = function readRouteNodes(root, node) {\n  if (node === void 0) {\n    node = root;\n  }\n\n  return Array.from(node.children).filter(function (el) {\n    return el.tagName === 'ION-ROUTE' && el.component;\n  }).map(function (el) {\n    var component = readProp(el, 'component');\n\n    if (component == null) {\n      throw new Error('component missing in ion-route');\n    }\n\n    return {\n      path: parsePath(readProp(el, 'url')),\n      id: component.toLowerCase(),\n      params: el.componentProps,\n      children: readRouteNodes(root, el)\n    };\n  });\n};\n\nvar readProp = function readProp(el, prop) {\n  if (prop in el) {\n    return el[prop];\n  }\n\n  if (el.hasAttribute(prop)) {\n    return el.getAttribute(prop);\n  }\n\n  return null;\n};\n\nvar flattenRouterTree = function flattenRouterTree(nodes) {\n  var routes = [];\n\n  for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n    var node = nodes_1[_i];\n    flattenNode([], routes, node);\n  }\n\n  return routes;\n};\n\nvar flattenNode = function flattenNode(chain, routes, node) {\n  var s = chain.slice();\n  s.push({\n    id: node.id,\n    path: node.path,\n    params: node.params\n  });\n\n  if (node.children.length === 0) {\n    routes.push(s);\n    return;\n  }\n\n  for (var _i = 0, _a = node.children; _i < _a.length; _i++) {\n    var sub = _a[_i];\n    flattenNode(s, routes, sub);\n  }\n};\n\nvar Router =\n/** @class */\nfunction () {\n  function Router(hostRef) {\n    registerInstance(this, hostRef);\n    this.previousPath = null;\n    this.busy = false;\n    this.state = 0;\n    this.lastState = 0;\n    /**\n     * By default `ion-router` will match the routes at the root path (\"/\").\n     * That can be changed when\n     *\n     */\n\n    this.root = '/';\n    /**\n     * The router can work in two \"modes\":\n     * - With hash: `/index.html#/path/to/page`\n     * - Without hash: `/path/to/page`\n     *\n     * Using one or another might depend in the requirements of your app and/or where it's deployed.\n     *\n     * Usually \"hash-less\" navigation works better for SEO and it's more user friendly too, but it might\n     * requires additional server-side configuration in order to properly work.\n     *\n     * On the otherside hash-navigation is much easier to deploy, it even works over the file protocol.\n     *\n     * By default, this property is `true`, change to `false` to allow hash-less URLs.\n     */\n\n    this.useHash = true;\n    this.ionRouteWillChange = createEvent(this, \"ionRouteWillChange\", 7);\n    this.ionRouteDidChange = createEvent(this, \"ionRouteDidChange\", 7);\n  }\n\n  Router.prototype.componentWillLoad = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            console.debug('[ion-router] router will load');\n            return [4\n            /*yield*/\n            , waitUntilNavNode()];\n\n          case 1:\n            _a.sent();\n\n            console.debug('[ion-router] found nav');\n            return [4\n            /*yield*/\n            , this.onRoutesChanged()];\n\n          case 2:\n            _a.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  Router.prototype.componentDidLoad = function () {\n    window.addEventListener('ionRouteRedirectChanged', debounce(this.onRedirectChanged.bind(this), 10));\n    window.addEventListener('ionRouteDataChanged', debounce(this.onRoutesChanged.bind(this), 100));\n  };\n\n  Router.prototype.onPopState = function () {\n    var direction = this.historyDirection();\n    var path = this.getPath();\n    console.debug('[ion-router] URL changed -> update nav', path, direction);\n    return this.writeNavStateRoot(path, direction);\n  };\n\n  Router.prototype.onBackButton = function (ev) {\n    var _this = this;\n\n    ev.detail.register(0, function (processNextHandler) {\n      _this.back();\n\n      processNextHandler();\n    });\n  };\n  /**\n   * Navigate to the specified URL.\n   *\n   * @param url The url to navigate to.\n   * @param direction The direction of the animation. Defaults to `\"forward\"`.\n   */\n\n\n  Router.prototype.push = function (url, direction, animation) {\n    if (direction === void 0) {\n      direction = 'forward';\n    }\n\n    if (url.startsWith('.')) {\n      url = new URL(url, window.location.href).pathname;\n    }\n\n    console.debug('[ion-router] URL pushed -> updating nav', url, direction);\n    var path = parsePath(url);\n    var queryString = url.split('?')[1];\n    this.setPath(path, direction, queryString);\n    return this.writeNavStateRoot(path, direction, animation);\n  };\n  /**\n   * Go back to previous page in the window.history.\n   */\n\n\n  Router.prototype.back = function () {\n    window.history.back();\n    return Promise.resolve(this.waitPromise);\n  };\n  /** @internal */\n\n\n  Router.prototype.printDebug = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        console.debug('CURRENT PATH', this.getPath());\n        console.debug('PREVIOUS PATH', this.previousPath);\n        printRoutes(readRoutes(this.el));\n        printRedirects(readRedirects(this.el));\n        return [2\n        /*return*/\n        ];\n      });\n    });\n  };\n  /** @internal */\n\n\n  Router.prototype.navChanged = function (direction) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, ids, outlet, routes, chain, path;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (this.busy) {\n              console.warn('[ion-router] router is busy, navChanged was cancelled');\n              return [2\n              /*return*/\n              , false];\n            }\n\n            return [4\n            /*yield*/\n            , readNavState(window.document.body)];\n\n          case 1:\n            _a = _b.sent(), ids = _a.ids, outlet = _a.outlet;\n            routes = readRoutes(this.el);\n            chain = routerIDsToChain(ids, routes);\n\n            if (!chain) {\n              console.warn('[ion-router] no matching URL for ', ids.map(function (i) {\n                return i.id;\n              }));\n              return [2\n              /*return*/\n              , false];\n            }\n\n            path = chainToPath(chain);\n\n            if (!path) {\n              console.warn('[ion-router] router could not match path because some required param is missing');\n              return [2\n              /*return*/\n              , false];\n            }\n\n            console.debug('[ion-router] nav changed -> update URL', ids, path);\n            this.setPath(path, direction);\n            return [4\n            /*yield*/\n            , this.safeWriteNavState(outlet, chain, ROUTER_INTENT_NONE, path, null, ids.length)];\n\n          case 2:\n            _b.sent();\n\n            return [2\n            /*return*/\n            , true];\n        }\n      });\n    });\n  };\n\n  Router.prototype.onRedirectChanged = function () {\n    var path = this.getPath();\n\n    if (path && routeRedirect(path, readRedirects(this.el))) {\n      this.writeNavStateRoot(path, ROUTER_INTENT_NONE);\n    }\n  };\n\n  Router.prototype.onRoutesChanged = function () {\n    return this.writeNavStateRoot(this.getPath(), ROUTER_INTENT_NONE);\n  };\n\n  Router.prototype.historyDirection = function () {\n    var win = window;\n\n    if (win.history.state === null) {\n      this.state++;\n      win.history.replaceState(this.state, win.document.title, win.document.location && win.document.location.href);\n    }\n\n    var state = win.history.state;\n    var lastState = this.lastState;\n    this.lastState = state;\n\n    if (state > lastState || state >= lastState && lastState > 0) {\n      return ROUTER_INTENT_FORWARD;\n    } else if (state < lastState) {\n      return ROUTER_INTENT_BACK;\n    } else {\n      return ROUTER_INTENT_NONE;\n    }\n  };\n\n  Router.prototype.writeNavStateRoot = function (path, direction, animation) {\n    return __awaiter(this, void 0, void 0, function () {\n      var redirects, redirect, redirectFrom, routes, chain;\n      return __generator(this, function (_a) {\n        if (!path) {\n          console.error('[ion-router] URL is not part of the routing set');\n          return [2\n          /*return*/\n          , false];\n        }\n\n        redirects = readRedirects(this.el);\n        redirect = routeRedirect(path, redirects);\n        redirectFrom = null;\n\n        if (redirect) {\n          this.setPath(redirect.to, direction);\n          redirectFrom = redirect.from;\n          path = redirect.to;\n        }\n\n        routes = readRoutes(this.el);\n        chain = routerPathToChain(path, routes);\n\n        if (!chain) {\n          console.error('[ion-router] the path does not match any route');\n          return [2\n          /*return*/\n          , false];\n        } // write DOM give\n\n\n        return [2\n        /*return*/\n        , this.safeWriteNavState(document.body, chain, direction, path, redirectFrom, 0, animation)];\n      });\n    });\n  };\n\n  Router.prototype.safeWriteNavState = function (node, chain, direction, path, redirectFrom, index, animation) {\n    if (index === void 0) {\n      index = 0;\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var unlock, changed, e_2;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.lock()];\n\n          case 1:\n            unlock = _a.sent();\n            changed = false;\n            _a.label = 2;\n\n          case 2:\n            _a.trys.push([2, 4,, 5]);\n\n            return [4\n            /*yield*/\n            , this.writeNavState(node, chain, direction, path, redirectFrom, index, animation)];\n\n          case 3:\n            changed = _a.sent();\n            return [3\n            /*break*/\n            , 5];\n\n          case 4:\n            e_2 = _a.sent();\n            console.error(e_2);\n            return [3\n            /*break*/\n            , 5];\n\n          case 5:\n            unlock();\n            return [2\n            /*return*/\n            , changed];\n        }\n      });\n    });\n  };\n\n  Router.prototype.lock = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var p, resolve;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            p = this.waitPromise;\n            this.waitPromise = new Promise(function (r) {\n              return resolve = r;\n            });\n            if (!(p !== undefined)) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , p];\n\n          case 1:\n            _a.sent();\n\n            _a.label = 2;\n\n          case 2:\n            return [2\n            /*return*/\n            , resolve];\n        }\n      });\n    });\n  };\n\n  Router.prototype.writeNavState = function (node, chain, direction, path, redirectFrom, index, animation) {\n    if (index === void 0) {\n      index = 0;\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var routeEvent, changed;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (this.busy) {\n              console.warn('[ion-router] router is busy, transition was cancelled');\n              return [2\n              /*return*/\n              , false];\n            }\n\n            this.busy = true;\n            routeEvent = this.routeChangeEvent(path, redirectFrom);\n\n            if (routeEvent) {\n              this.ionRouteWillChange.emit(routeEvent);\n            }\n\n            return [4\n            /*yield*/\n            , writeNavState(node, chain, direction, index, false, animation)];\n\n          case 1:\n            changed = _a.sent();\n            this.busy = false;\n\n            if (changed) {\n              console.debug('[ion-router] route changed', path);\n            } // emit did change\n\n\n            if (routeEvent) {\n              this.ionRouteDidChange.emit(routeEvent);\n            }\n\n            return [2\n            /*return*/\n            , changed];\n        }\n      });\n    });\n  };\n\n  Router.prototype.setPath = function (path, direction, queryString) {\n    this.state++;\n    writePath(window.history, this.root, this.useHash, path, direction, this.state, queryString);\n  };\n\n  Router.prototype.getPath = function () {\n    return readPath(window.location, this.root, this.useHash);\n  };\n\n  Router.prototype.routeChangeEvent = function (path, redirectFromPath) {\n    var from = this.previousPath;\n    var to = generatePath(path);\n    this.previousPath = to;\n\n    if (to === from) {\n      return null;\n    }\n\n    var redirectedFrom = redirectFromPath ? generatePath(redirectFromPath) : null;\n    return {\n      from: from,\n      redirectedFrom: redirectedFrom,\n      to: to\n    };\n  };\n\n  Object.defineProperty(Router.prototype, \"el\", {\n    get: function get() {\n      return getElement(this);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return Router;\n}();\n\nvar routerLinkCss = \":host{--background:transparent;--color:var(--ion-color-primary, #3880ff);background:var(--background);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}a{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit}\";\n\nvar RouterLink =\n/** @class */\nfunction () {\n  function RouterLink(hostRef) {\n    var _this = this;\n\n    registerInstance(this, hostRef);\n    /**\n     * When using a router, it specifies the transition direction when navigating to\n     * another page using `href`.\n     */\n\n    this.routerDirection = 'forward';\n\n    this.onClick = function (ev) {\n      openURL(_this.href, ev, _this.routerDirection, _this.routerAnimation);\n    };\n  }\n\n  RouterLink.prototype.render = function () {\n    var _a;\n\n    var mode = getIonMode(this);\n    var attrs = {\n      href: this.href,\n      rel: this.rel,\n      target: this.target\n    };\n    return h(Host, {\n      onClick: this.onClick,\n      class: Object.assign(Object.assign({}, createColorClasses(this.color)), (_a = {}, _a[mode] = true, _a['ion-activatable'] = true, _a))\n    }, h(\"a\", Object.assign({}, attrs), h(\"slot\", null)));\n  };\n\n  return RouterLink;\n}();\n\nRouterLink.style = routerLinkCss;\nexport { Route as ion_route, RouteRedirect as ion_route_redirect, Router as ion_router, RouterLink as ion_router_link };","map":{"version":3,"sources":["/home/bigboy/Study/development/rect+ionic/ionic-react/node_modules/@ionic/core/dist/esm-es5/ion-route_4.entry.js"],"names":["__awaiter","__generator","__spreadArrays","r","registerInstance","c","createEvent","e","getElement","h","H","Host","b","getIonMode","debounce","o","openURL","createColorClasses","Route","hostRef","url","ionRouteDataChanged","prototype","onUpdate","newValue","emit","onComponentProps","oldValue","keys1","Object","keys","keys2","length","_i","keys1_1","key","connectedCallback","defineProperty","get","enumerable","configurable","RouteRedirect","ionRouteRedirectChanged","propDidChange","ROUTER_INTENT_NONE","ROUTER_INTENT_FORWARD","ROUTER_INTENT_BACK","generatePath","segments","path","filter","s","join","chainToPath","chain","chain_1","route","_a","_b","segment","param","params","slice","push","writePath","history","root","useHash","direction","state","queryString","parsePath","undefined","pushState","replaceState","removePrefix","prefix","i","readPath","loc","pathname","hash","removeQueryString","split","map","trim","printRoutes","routes","console","group","_loop_1","forEach","apply","ids","id","debug","routes_1","groupEnd","printRedirects","redirects","redirects_1","redirect","to","from","writeNavState","index","changed","animation","outlet","result","e_1","label","trys","searchNavNode","componentOnReady","sent","setRouteId","element","markVisible","error","readNavState","node","getRouteId","waitUntilNavNode","document","body","Promise","resolve","window","addEventListener","once","QUERY","matches","querySelector","matchesRedirect","input","expected","routeRedirect","find","matchesIDs","len","Math","min","toLowerCase","matchesPath","inputPath","RouterSegments","matchesDefault","allparams","path_1","data","next","mergeParams","a","assign","routerIDsToChain","chains","match","maxMatches","plainIDs","chains_1","score","routerPathToChain","chains_2","matchedChain","computePriority","level","chain_2","pow","shift","readRedirects","Array","children","el","tagName","readProp","readRoutes","flattenRouterTree","readRouteNodes","component","Error","componentProps","prop","hasAttribute","getAttribute","nodes","nodes_1","flattenNode","sub","Router","previousPath","busy","lastState","ionRouteWillChange","ionRouteDidChange","componentWillLoad","onRoutesChanged","componentDidLoad","onRedirectChanged","bind","onPopState","historyDirection","getPath","writeNavStateRoot","onBackButton","ev","_this","detail","register","processNextHandler","back","startsWith","URL","location","href","setPath","waitPromise","printDebug","navChanged","warn","safeWriteNavState","win","title","redirectFrom","unlock","e_2","lock","p","routeEvent","routeChangeEvent","redirectFromPath","redirectedFrom","routerLinkCss","RouterLink","routerDirection","onClick","routerAnimation","render","mode","attrs","rel","target","class","color","style","ion_route","ion_route_redirect","ion_router","ion_router_link"],"mappings":"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","sourcesContent":["import { __awaiter, __generator, __spreadArrays } from \"tslib\";\nimport { r as registerInstance, c as createEvent, e as getElement, h, H as Host } from './index-29df6f59.js';\nimport { b as getIonMode } from './ionic-global-08f4fb8a.js';\nimport { e as debounce } from './helpers-5c745fbd.js';\nimport { o as openURL, c as createColorClasses } from './theme-3f0b0c04.js';\nvar Route = /** @class */ (function () {\n    function Route(hostRef) {\n        registerInstance(this, hostRef);\n        /**\n         * Relative path that needs to match in order for this route to apply.\n         *\n         * Accepts paths similar to expressjs so that you can define parameters\n         * in the url /foo/:bar where bar would be available in incoming props.\n         */\n        this.url = '';\n        this.ionRouteDataChanged = createEvent(this, \"ionRouteDataChanged\", 7);\n    }\n    Route.prototype.onUpdate = function (newValue) {\n        this.ionRouteDataChanged.emit(newValue);\n    };\n    Route.prototype.onComponentProps = function (newValue, oldValue) {\n        if (newValue === oldValue) {\n            return;\n        }\n        var keys1 = newValue ? Object.keys(newValue) : [];\n        var keys2 = oldValue ? Object.keys(oldValue) : [];\n        if (keys1.length !== keys2.length) {\n            this.onUpdate(newValue);\n            return;\n        }\n        for (var _i = 0, keys1_1 = keys1; _i < keys1_1.length; _i++) {\n            var key = keys1_1[_i];\n            if (newValue[key] !== oldValue[key]) {\n                this.onUpdate(newValue);\n                return;\n            }\n        }\n    };\n    Route.prototype.connectedCallback = function () {\n        this.ionRouteDataChanged.emit();\n    };\n    Object.defineProperty(Route, \"watchers\", {\n        get: function () {\n            return {\n                \"url\": [\"onUpdate\"],\n                \"component\": [\"onUpdate\"],\n                \"componentProps\": [\"onComponentProps\"]\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Route;\n}());\nvar RouteRedirect = /** @class */ (function () {\n    function RouteRedirect(hostRef) {\n        registerInstance(this, hostRef);\n        this.ionRouteRedirectChanged = createEvent(this, \"ionRouteRedirectChanged\", 7);\n    }\n    RouteRedirect.prototype.propDidChange = function () {\n        this.ionRouteRedirectChanged.emit();\n    };\n    RouteRedirect.prototype.connectedCallback = function () {\n        this.ionRouteRedirectChanged.emit();\n    };\n    Object.defineProperty(RouteRedirect, \"watchers\", {\n        get: function () {\n            return {\n                \"from\": [\"propDidChange\"],\n                \"to\": [\"propDidChange\"]\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return RouteRedirect;\n}());\nvar ROUTER_INTENT_NONE = 'root';\nvar ROUTER_INTENT_FORWARD = 'forward';\nvar ROUTER_INTENT_BACK = 'back';\nvar generatePath = function (segments) {\n    var path = segments\n        .filter(function (s) { return s.length > 0; })\n        .join('/');\n    return '/' + path;\n};\nvar chainToPath = function (chain) {\n    var path = [];\n    for (var _i = 0, chain_1 = chain; _i < chain_1.length; _i++) {\n        var route = chain_1[_i];\n        for (var _a = 0, _b = route.path; _a < _b.length; _a++) {\n            var segment = _b[_a];\n            if (segment[0] === ':') {\n                var param = route.params && route.params[segment.slice(1)];\n                if (!param) {\n                    return null;\n                }\n                path.push(param);\n            }\n            else if (segment !== '') {\n                path.push(segment);\n            }\n        }\n    }\n    return path;\n};\nvar writePath = function (history, root, useHash, path, direction, state, queryString) {\n    var url = generatePath(__spreadArrays(parsePath(root), path));\n    if (useHash) {\n        url = '#' + url;\n    }\n    if (queryString !== undefined) {\n        url = url + '?' + queryString;\n    }\n    if (direction === ROUTER_INTENT_FORWARD) {\n        history.pushState(state, '', url);\n    }\n    else {\n        history.replaceState(state, '', url);\n    }\n};\nvar removePrefix = function (prefix, path) {\n    if (prefix.length > path.length) {\n        return null;\n    }\n    if (prefix.length <= 1 && prefix[0] === '') {\n        return path;\n    }\n    for (var i = 0; i < prefix.length; i++) {\n        if (prefix[i].length > 0 && prefix[i] !== path[i]) {\n            return null;\n        }\n    }\n    if (path.length === prefix.length) {\n        return [''];\n    }\n    return path.slice(prefix.length);\n};\nvar readPath = function (loc, root, useHash) {\n    var pathname = loc.pathname;\n    if (useHash) {\n        var hash = loc.hash;\n        pathname = (hash[0] === '#')\n            ? hash.slice(1)\n            : '';\n    }\n    var prefix = parsePath(root);\n    var path = parsePath(pathname);\n    return removePrefix(prefix, path);\n};\nvar parsePath = function (path) {\n    if (path == null) {\n        return [''];\n    }\n    var removeQueryString = path.split('?')[0];\n    var segments = removeQueryString.split('/')\n        .map(function (s) { return s.trim(); })\n        .filter(function (s) { return s.length > 0; });\n    if (segments.length === 0) {\n        return [''];\n    }\n    else {\n        return segments;\n    }\n};\nvar printRoutes = function (routes) {\n    console.group(\"[ion-core] ROUTES[\" + routes.length + \"]\");\n    var _loop_1 = function (chain) {\n        var path = [];\n        chain.forEach(function (r) { return path.push.apply(path, r.path); });\n        var ids = chain.map(function (r) { return r.id; });\n        console.debug(\"%c \" + generatePath(path), 'font-weight: bold; padding-left: 20px', '=>\\t', \"(\" + ids.join(', ') + \")\");\n    };\n    for (var _i = 0, routes_1 = routes; _i < routes_1.length; _i++) {\n        var chain = routes_1[_i];\n        _loop_1(chain);\n    }\n    console.groupEnd();\n};\nvar printRedirects = function (redirects) {\n    console.group(\"[ion-core] REDIRECTS[\" + redirects.length + \"]\");\n    for (var _i = 0, redirects_1 = redirects; _i < redirects_1.length; _i++) {\n        var redirect = redirects_1[_i];\n        if (redirect.to) {\n            console.debug('FROM: ', \"$c \" + generatePath(redirect.from), 'font-weight: bold', ' TO: ', \"$c \" + generatePath(redirect.to), 'font-weight: bold');\n        }\n    }\n    console.groupEnd();\n};\nvar writeNavState = function (root, chain, direction, index, changed, animation) {\n    if (changed === void 0) { changed = false; }\n    return __awaiter(void 0, void 0, void 0, function () {\n        var outlet, route, result, e_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 6, , 7]);\n                    outlet = searchNavNode(root);\n                    // make sure we can continue interacting the DOM, otherwise abort\n                    if (index >= chain.length || !outlet) {\n                        return [2 /*return*/, changed];\n                    }\n                    return [4 /*yield*/, outlet.componentOnReady()];\n                case 1:\n                    _a.sent();\n                    route = chain[index];\n                    return [4 /*yield*/, outlet.setRouteId(route.id, route.params, direction, animation)];\n                case 2:\n                    result = _a.sent();\n                    // if the outlet changed the page, reset navigation to neutral (no direction)\n                    // this means nested outlets will not animate\n                    if (result.changed) {\n                        direction = ROUTER_INTENT_NONE;\n                        changed = true;\n                    }\n                    return [4 /*yield*/, writeNavState(result.element, chain, direction, index + 1, changed, animation)];\n                case 3:\n                    // recursively set nested outlets\n                    changed = _a.sent();\n                    if (!result.markVisible) return [3 /*break*/, 5];\n                    return [4 /*yield*/, result.markVisible()];\n                case 4:\n                    _a.sent();\n                    _a.label = 5;\n                case 5: return [2 /*return*/, changed];\n                case 6:\n                    e_1 = _a.sent();\n                    console.error(e_1);\n                    return [2 /*return*/, false];\n                case 7: return [2 /*return*/];\n            }\n        });\n    });\n};\nvar readNavState = function (root) { return __awaiter(void 0, void 0, void 0, function () {\n    var ids, outlet, node, id;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                ids = [];\n                node = root;\n                _a.label = 1;\n            case 1:\n                if (!true) return [3 /*break*/, 5];\n                outlet = searchNavNode(node);\n                if (!outlet) return [3 /*break*/, 3];\n                return [4 /*yield*/, outlet.getRouteId()];\n            case 2:\n                id = _a.sent();\n                if (id) {\n                    node = id.element;\n                    id.element = undefined;\n                    ids.push(id);\n                }\n                else {\n                    return [3 /*break*/, 5];\n                }\n                return [3 /*break*/, 4];\n            case 3: return [3 /*break*/, 5];\n            case 4: return [3 /*break*/, 1];\n            case 5: return [2 /*return*/, { ids: ids, outlet: outlet }];\n        }\n    });\n}); };\nvar waitUntilNavNode = function () {\n    if (searchNavNode(document.body)) {\n        return Promise.resolve();\n    }\n    return new Promise(function (resolve) {\n        window.addEventListener('ionNavWillLoad', resolve, { once: true });\n    });\n};\nvar QUERY = ':not([no-router]) ion-nav, :not([no-router]) ion-tabs, :not([no-router]) ion-router-outlet';\nvar searchNavNode = function (root) {\n    if (!root) {\n        return undefined;\n    }\n    if (root.matches(QUERY)) {\n        return root;\n    }\n    var outlet = root.querySelector(QUERY);\n    return outlet ? outlet : undefined;\n};\nvar matchesRedirect = function (input, route) {\n    var from = route.from, to = route.to;\n    if (to === undefined) {\n        return false;\n    }\n    if (from.length > input.length) {\n        return false;\n    }\n    for (var i = 0; i < from.length; i++) {\n        var expected = from[i];\n        if (expected === '*') {\n            return true;\n        }\n        if (expected !== input[i]) {\n            return false;\n        }\n    }\n    return from.length === input.length;\n};\nvar routeRedirect = function (path, routes) {\n    return routes.find(function (route) { return matchesRedirect(path, route); });\n};\nvar matchesIDs = function (ids, chain) {\n    var len = Math.min(ids.length, chain.length);\n    var i = 0;\n    for (; i < len; i++) {\n        if (ids[i].toLowerCase() !== chain[i].id) {\n            break;\n        }\n    }\n    return i;\n};\nvar matchesPath = function (inputPath, chain) {\n    var segments = new RouterSegments(inputPath);\n    var matchesDefault = false;\n    var allparams;\n    for (var i = 0; i < chain.length; i++) {\n        var path = chain[i].path;\n        if (path[0] === '') {\n            matchesDefault = true;\n        }\n        else {\n            for (var _i = 0, path_1 = path; _i < path_1.length; _i++) {\n                var segment = path_1[_i];\n                var data = segments.next();\n                // data param\n                if (segment[0] === ':') {\n                    if (data === '') {\n                        return null;\n                    }\n                    allparams = allparams || [];\n                    var params = allparams[i] || (allparams[i] = {});\n                    params[segment.slice(1)] = data;\n                }\n                else if (data !== segment) {\n                    return null;\n                }\n            }\n            matchesDefault = false;\n        }\n    }\n    var matches = (matchesDefault)\n        ? matchesDefault === (segments.next() === '')\n        : true;\n    if (!matches) {\n        return null;\n    }\n    if (allparams) {\n        return chain.map(function (route, i) { return ({\n            id: route.id,\n            path: route.path,\n            params: mergeParams(route.params, allparams[i])\n        }); });\n    }\n    return chain;\n};\nvar mergeParams = function (a, b) {\n    if (!a && b) {\n        return b;\n    }\n    else if (a && !b) {\n        return a;\n    }\n    else if (a && b) {\n        return Object.assign(Object.assign({}, a), b);\n    }\n    return undefined;\n};\nvar routerIDsToChain = function (ids, chains) {\n    var match = null;\n    var maxMatches = 0;\n    var plainIDs = ids.map(function (i) { return i.id; });\n    for (var _i = 0, chains_1 = chains; _i < chains_1.length; _i++) {\n        var chain = chains_1[_i];\n        var score = matchesIDs(plainIDs, chain);\n        if (score > maxMatches) {\n            match = chain;\n            maxMatches = score;\n        }\n    }\n    if (match) {\n        return match.map(function (route, i) { return ({\n            id: route.id,\n            path: route.path,\n            params: mergeParams(route.params, ids[i] && ids[i].params)\n        }); });\n    }\n    return null;\n};\nvar routerPathToChain = function (path, chains) {\n    var match = null;\n    var matches = 0;\n    for (var _i = 0, chains_2 = chains; _i < chains_2.length; _i++) {\n        var chain = chains_2[_i];\n        var matchedChain = matchesPath(path, chain);\n        if (matchedChain !== null) {\n            var score = computePriority(matchedChain);\n            if (score > matches) {\n                matches = score;\n                match = matchedChain;\n            }\n        }\n    }\n    return match;\n};\nvar computePriority = function (chain) {\n    var score = 1;\n    var level = 1;\n    for (var _i = 0, chain_2 = chain; _i < chain_2.length; _i++) {\n        var route = chain_2[_i];\n        for (var _a = 0, _b = route.path; _a < _b.length; _a++) {\n            var path = _b[_a];\n            if (path[0] === ':') {\n                score += Math.pow(1, level);\n            }\n            else if (path !== '') {\n                score += Math.pow(2, level);\n            }\n            level++;\n        }\n    }\n    return score;\n};\nvar RouterSegments = /** @class */ (function () {\n    function RouterSegments(path) {\n        this.path = path.slice();\n    }\n    RouterSegments.prototype.next = function () {\n        if (this.path.length > 0) {\n            return this.path.shift();\n        }\n        return '';\n    };\n    return RouterSegments;\n}());\nvar readRedirects = function (root) {\n    return Array.from(root.children)\n        .filter(function (el) { return el.tagName === 'ION-ROUTE-REDIRECT'; })\n        .map(function (el) {\n        var to = readProp(el, 'to');\n        return {\n            from: parsePath(readProp(el, 'from')),\n            to: to == null ? undefined : parsePath(to),\n        };\n    });\n};\nvar readRoutes = function (root) {\n    return flattenRouterTree(readRouteNodes(root));\n};\nvar readRouteNodes = function (root, node) {\n    if (node === void 0) { node = root; }\n    return Array.from(node.children)\n        .filter(function (el) { return el.tagName === 'ION-ROUTE' && el.component; })\n        .map(function (el) {\n        var component = readProp(el, 'component');\n        if (component == null) {\n            throw new Error('component missing in ion-route');\n        }\n        return {\n            path: parsePath(readProp(el, 'url')),\n            id: component.toLowerCase(),\n            params: el.componentProps,\n            children: readRouteNodes(root, el)\n        };\n    });\n};\nvar readProp = function (el, prop) {\n    if (prop in el) {\n        return el[prop];\n    }\n    if (el.hasAttribute(prop)) {\n        return el.getAttribute(prop);\n    }\n    return null;\n};\nvar flattenRouterTree = function (nodes) {\n    var routes = [];\n    for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n        var node = nodes_1[_i];\n        flattenNode([], routes, node);\n    }\n    return routes;\n};\nvar flattenNode = function (chain, routes, node) {\n    var s = chain.slice();\n    s.push({\n        id: node.id,\n        path: node.path,\n        params: node.params\n    });\n    if (node.children.length === 0) {\n        routes.push(s);\n        return;\n    }\n    for (var _i = 0, _a = node.children; _i < _a.length; _i++) {\n        var sub = _a[_i];\n        flattenNode(s, routes, sub);\n    }\n};\nvar Router = /** @class */ (function () {\n    function Router(hostRef) {\n        registerInstance(this, hostRef);\n        this.previousPath = null;\n        this.busy = false;\n        this.state = 0;\n        this.lastState = 0;\n        /**\n         * By default `ion-router` will match the routes at the root path (\"/\").\n         * That can be changed when\n         *\n         */\n        this.root = '/';\n        /**\n         * The router can work in two \"modes\":\n         * - With hash: `/index.html#/path/to/page`\n         * - Without hash: `/path/to/page`\n         *\n         * Using one or another might depend in the requirements of your app and/or where it's deployed.\n         *\n         * Usually \"hash-less\" navigation works better for SEO and it's more user friendly too, but it might\n         * requires additional server-side configuration in order to properly work.\n         *\n         * On the otherside hash-navigation is much easier to deploy, it even works over the file protocol.\n         *\n         * By default, this property is `true`, change to `false` to allow hash-less URLs.\n         */\n        this.useHash = true;\n        this.ionRouteWillChange = createEvent(this, \"ionRouteWillChange\", 7);\n        this.ionRouteDidChange = createEvent(this, \"ionRouteDidChange\", 7);\n    }\n    Router.prototype.componentWillLoad = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        console.debug('[ion-router] router will load');\n                        return [4 /*yield*/, waitUntilNavNode()];\n                    case 1:\n                        _a.sent();\n                        console.debug('[ion-router] found nav');\n                        return [4 /*yield*/, this.onRoutesChanged()];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Router.prototype.componentDidLoad = function () {\n        window.addEventListener('ionRouteRedirectChanged', debounce(this.onRedirectChanged.bind(this), 10));\n        window.addEventListener('ionRouteDataChanged', debounce(this.onRoutesChanged.bind(this), 100));\n    };\n    Router.prototype.onPopState = function () {\n        var direction = this.historyDirection();\n        var path = this.getPath();\n        console.debug('[ion-router] URL changed -> update nav', path, direction);\n        return this.writeNavStateRoot(path, direction);\n    };\n    Router.prototype.onBackButton = function (ev) {\n        var _this = this;\n        ev.detail.register(0, function (processNextHandler) {\n            _this.back();\n            processNextHandler();\n        });\n    };\n    /**\n     * Navigate to the specified URL.\n     *\n     * @param url The url to navigate to.\n     * @param direction The direction of the animation. Defaults to `\"forward\"`.\n     */\n    Router.prototype.push = function (url, direction, animation) {\n        if (direction === void 0) { direction = 'forward'; }\n        if (url.startsWith('.')) {\n            url = (new URL(url, window.location.href)).pathname;\n        }\n        console.debug('[ion-router] URL pushed -> updating nav', url, direction);\n        var path = parsePath(url);\n        var queryString = url.split('?')[1];\n        this.setPath(path, direction, queryString);\n        return this.writeNavStateRoot(path, direction, animation);\n    };\n    /**\n     * Go back to previous page in the window.history.\n     */\n    Router.prototype.back = function () {\n        window.history.back();\n        return Promise.resolve(this.waitPromise);\n    };\n    /** @internal */\n    Router.prototype.printDebug = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                console.debug('CURRENT PATH', this.getPath());\n                console.debug('PREVIOUS PATH', this.previousPath);\n                printRoutes(readRoutes(this.el));\n                printRedirects(readRedirects(this.el));\n                return [2 /*return*/];\n            });\n        });\n    };\n    /** @internal */\n    Router.prototype.navChanged = function (direction) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, ids, outlet, routes, chain, path;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (this.busy) {\n                            console.warn('[ion-router] router is busy, navChanged was cancelled');\n                            return [2 /*return*/, false];\n                        }\n                        return [4 /*yield*/, readNavState(window.document.body)];\n                    case 1:\n                        _a = _b.sent(), ids = _a.ids, outlet = _a.outlet;\n                        routes = readRoutes(this.el);\n                        chain = routerIDsToChain(ids, routes);\n                        if (!chain) {\n                            console.warn('[ion-router] no matching URL for ', ids.map(function (i) { return i.id; }));\n                            return [2 /*return*/, false];\n                        }\n                        path = chainToPath(chain);\n                        if (!path) {\n                            console.warn('[ion-router] router could not match path because some required param is missing');\n                            return [2 /*return*/, false];\n                        }\n                        console.debug('[ion-router] nav changed -> update URL', ids, path);\n                        this.setPath(path, direction);\n                        return [4 /*yield*/, this.safeWriteNavState(outlet, chain, ROUTER_INTENT_NONE, path, null, ids.length)];\n                    case 2:\n                        _b.sent();\n                        return [2 /*return*/, true];\n                }\n            });\n        });\n    };\n    Router.prototype.onRedirectChanged = function () {\n        var path = this.getPath();\n        if (path && routeRedirect(path, readRedirects(this.el))) {\n            this.writeNavStateRoot(path, ROUTER_INTENT_NONE);\n        }\n    };\n    Router.prototype.onRoutesChanged = function () {\n        return this.writeNavStateRoot(this.getPath(), ROUTER_INTENT_NONE);\n    };\n    Router.prototype.historyDirection = function () {\n        var win = window;\n        if (win.history.state === null) {\n            this.state++;\n            win.history.replaceState(this.state, win.document.title, win.document.location && win.document.location.href);\n        }\n        var state = win.history.state;\n        var lastState = this.lastState;\n        this.lastState = state;\n        if (state > lastState || (state >= lastState && lastState > 0)) {\n            return ROUTER_INTENT_FORWARD;\n        }\n        else if (state < lastState) {\n            return ROUTER_INTENT_BACK;\n        }\n        else {\n            return ROUTER_INTENT_NONE;\n        }\n    };\n    Router.prototype.writeNavStateRoot = function (path, direction, animation) {\n        return __awaiter(this, void 0, void 0, function () {\n            var redirects, redirect, redirectFrom, routes, chain;\n            return __generator(this, function (_a) {\n                if (!path) {\n                    console.error('[ion-router] URL is not part of the routing set');\n                    return [2 /*return*/, false];\n                }\n                redirects = readRedirects(this.el);\n                redirect = routeRedirect(path, redirects);\n                redirectFrom = null;\n                if (redirect) {\n                    this.setPath(redirect.to, direction);\n                    redirectFrom = redirect.from;\n                    path = redirect.to;\n                }\n                routes = readRoutes(this.el);\n                chain = routerPathToChain(path, routes);\n                if (!chain) {\n                    console.error('[ion-router] the path does not match any route');\n                    return [2 /*return*/, false];\n                }\n                // write DOM give\n                return [2 /*return*/, this.safeWriteNavState(document.body, chain, direction, path, redirectFrom, 0, animation)];\n            });\n        });\n    };\n    Router.prototype.safeWriteNavState = function (node, chain, direction, path, redirectFrom, index, animation) {\n        if (index === void 0) { index = 0; }\n        return __awaiter(this, void 0, void 0, function () {\n            var unlock, changed, e_2;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.lock()];\n                    case 1:\n                        unlock = _a.sent();\n                        changed = false;\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, this.writeNavState(node, chain, direction, path, redirectFrom, index, animation)];\n                    case 3:\n                        changed = _a.sent();\n                        return [3 /*break*/, 5];\n                    case 4:\n                        e_2 = _a.sent();\n                        console.error(e_2);\n                        return [3 /*break*/, 5];\n                    case 5:\n                        unlock();\n                        return [2 /*return*/, changed];\n                }\n            });\n        });\n    };\n    Router.prototype.lock = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var p, resolve;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        p = this.waitPromise;\n                        this.waitPromise = new Promise(function (r) { return resolve = r; });\n                        if (!(p !== undefined)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, p];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [2 /*return*/, resolve];\n                }\n            });\n        });\n    };\n    Router.prototype.writeNavState = function (node, chain, direction, path, redirectFrom, index, animation) {\n        if (index === void 0) { index = 0; }\n        return __awaiter(this, void 0, void 0, function () {\n            var routeEvent, changed;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.busy) {\n                            console.warn('[ion-router] router is busy, transition was cancelled');\n                            return [2 /*return*/, false];\n                        }\n                        this.busy = true;\n                        routeEvent = this.routeChangeEvent(path, redirectFrom);\n                        if (routeEvent) {\n                            this.ionRouteWillChange.emit(routeEvent);\n                        }\n                        return [4 /*yield*/, writeNavState(node, chain, direction, index, false, animation)];\n                    case 1:\n                        changed = _a.sent();\n                        this.busy = false;\n                        if (changed) {\n                            console.debug('[ion-router] route changed', path);\n                        }\n                        // emit did change\n                        if (routeEvent) {\n                            this.ionRouteDidChange.emit(routeEvent);\n                        }\n                        return [2 /*return*/, changed];\n                }\n            });\n        });\n    };\n    Router.prototype.setPath = function (path, direction, queryString) {\n        this.state++;\n        writePath(window.history, this.root, this.useHash, path, direction, this.state, queryString);\n    };\n    Router.prototype.getPath = function () {\n        return readPath(window.location, this.root, this.useHash);\n    };\n    Router.prototype.routeChangeEvent = function (path, redirectFromPath) {\n        var from = this.previousPath;\n        var to = generatePath(path);\n        this.previousPath = to;\n        if (to === from) {\n            return null;\n        }\n        var redirectedFrom = redirectFromPath ? generatePath(redirectFromPath) : null;\n        return {\n            from: from,\n            redirectedFrom: redirectedFrom,\n            to: to,\n        };\n    };\n    Object.defineProperty(Router.prototype, \"el\", {\n        get: function () { return getElement(this); },\n        enumerable: false,\n        configurable: true\n    });\n    return Router;\n}());\nvar routerLinkCss = \":host{--background:transparent;--color:var(--ion-color-primary, #3880ff);background:var(--background);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}a{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit}\";\nvar RouterLink = /** @class */ (function () {\n    function RouterLink(hostRef) {\n        var _this = this;\n        registerInstance(this, hostRef);\n        /**\n         * When using a router, it specifies the transition direction when navigating to\n         * another page using `href`.\n         */\n        this.routerDirection = 'forward';\n        this.onClick = function (ev) {\n            openURL(_this.href, ev, _this.routerDirection, _this.routerAnimation);\n        };\n    }\n    RouterLink.prototype.render = function () {\n        var _a;\n        var mode = getIonMode(this);\n        var attrs = {\n            href: this.href,\n            rel: this.rel,\n            target: this.target\n        };\n        return (h(Host, { onClick: this.onClick, class: Object.assign(Object.assign({}, createColorClasses(this.color)), (_a = {}, _a[mode] = true, _a['ion-activatable'] = true, _a)) }, h(\"a\", Object.assign({}, attrs), h(\"slot\", null))));\n    };\n    return RouterLink;\n}());\nRouterLink.style = routerLinkCss;\nexport { Route as ion_route, RouteRedirect as ion_route_redirect, Router as ion_router, RouterLink as ion_router_link };\n"]},"metadata":{},"sourceType":"module"}